@model MyCalendar.DTOs.TagsDTO
@using MyCalendar.Enums


@using (Html.BeginForm("UpdateTags", "Home"))
{
    <div class="after-add-more">
        @foreach (var tag in Model.Tags)
        {
            <div class="input-group control-group">
                <div class="col-sm-3">
                    <div class="form-group">
                        <input type="text" class="form-control" id="name" name="name[]" value="@tag.Name" placeholder="Name" disabled="@tag.UpdateDisabled">

                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <input type="color" class="form-control" id="themeColor" name="themeColor[]" value="@tag.ThemeColor" placeholder="Pick colour" disabled="@tag.UpdateDisabled" />
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <select class="form-control" id="privacy" name="privacy[]" disabled="@tag.UpdateDisabled">
                            @foreach (TagPrivacy privacy in Enum.GetValues(typeof(TagPrivacy)))
                            {
                                string sharedBy = "";

                                if (privacy == TagPrivacy.Shared)
                                {
                                    sharedBy = (tag.UserID == Model.UserID ? "(by you)" : "(by user)");
                                }
                                <option value="@((int)privacy)" @(privacy == tag.Privacy ? "selected" : "")>@privacy @sharedBy</option>

                            }
                        </select>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <div class="input-group">
                            <select class="form-control" id="typeID" name="typeID[]" style="width: 160px" disabled="@tag.UpdateDisabled">
                                @if (Model.TagTypes != null && Model.TagTypes.Any())
                                {
                                    foreach (var type in Model.TagTypes)
                                    {
                                    <option value="@type.Id" @(type.Id == tag.TypeID ? "selected" : "")>@type.Name</option>
                                    }
                                }
                            </select>
                            <div class="input-group-btn">
                                <button class="btn btn-danger remove" type="button"> <span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                            </div>
                            @if (tag.UpdateDisabled)
                            {
                                <input type="hidden" name="name[]" value="@tag.Name">
                                <input type="hidden" name="themeColor[]" value="@tag.ThemeColor">
                                <input type="hidden" name="typeID[]" value="@tag.TypeID">
                                <input type="hidden" name="privacy[]" value="@tag.Privacy">
                            }
                            <input type="hidden" name="Id[]" value="@tag.Id" />
                            <input type="hidden" name="UserCreatedId[]" value="@tag.UserID">
                        </div>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
        }
        <button class="btn btn-success add-more pull-right" type="button"> <span class="glyphicon glyphicon-plus" aria-hidden="true">  Add</span></button>
    </div>

    <!-- Copy Fields -->
    <div class="copy hide">
        <div class="control-group input-group" style="margin-top:10px">
            <div class="col-sm-3">
                <div class="form-group">
                    <input type="text" class="form-control" id="name" name="name[]" value="" placeholder="Name">
                </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <input type="color" class="form-control" id="themeColor" name="themeColor[]" value="" placeholder="Pick colour" />
                </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <select class="form-control" id="privacy" name="privacy[]">
                        @foreach (TagPrivacy privacy in Enum.GetValues(typeof(TagPrivacy)))
                        {
                            <option value="@((int)privacy)">@privacy @(privacy == TagPrivacy.Shared ? "(by you)" : "")</option>
                        }
                    </select>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <div class="input-group">
                        <select class="form-control" id="typeId" name="typeID[]" style="width: 160px">
                            @if (Model.TagTypes != null && Model.TagTypes.Any())
                            {
                                foreach (var type in Model.TagTypes)
                                {
                                    <option value="@type.Id">@type.Name</option>
                                }
                            }
                        </select>
                        <div class="input-group-btn">
                            <button class="btn btn-danger remove" type="button"> <span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                        </div>
                    </div>
                    <input type="hidden" name="Id[]" value="" />
                    <input type="hidden" name="UserCreatedId[]" value="">
                </div>
            </div>
            <div class="clear"></div>
        </div>
    </div>
    @Html.HiddenFor(x => x.UserID)
    <button type="submit" class="btn btn-primary">Update</button>
}